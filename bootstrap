#!/bin/bash
DOTFILES="${HOME}/.local/dotfiles"
echo "adding rcfiles..."
for file in $(find "${DOTFILES}/rcfiles/" -type d); do
	BASENAME=${file#"${DOTFILES}/rcfiles/"}
	mkdir -p "${HOME}/${BASENAME}"
done
for file in $(find "${DOTFILES}/rcfiles/" -type f); do
	BASENAME=${file#"${DOTFILES}/rcfiles/"}
	if [ -e "${HOME}/${BASENAME}" ]; then
		if [ -L "${HOME}/${BASENAME}" ]; then
			echo "    ${BASENAME} linked."
			continue
		else
			echo "    ${BASENAME} exists. backing up..."
			mv "${HOME}/${BASENAME}" "${HOME}/${BASENAME}.bckp"
		fi
	elif [ -L "${HOME}/${BASENAME}" ]; then
		echo "    ${BASENAME} broken link. removing..."
		unlink "${HOME}/${BASENAME}"
	fi
	ln -s "${file}" "${HOME}/${BASENAME}"
	echo "    ${BASENAME} linked."
done
echo "all done! relog to see changes."
